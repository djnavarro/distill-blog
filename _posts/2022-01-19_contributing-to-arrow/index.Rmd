---
title: "My first contribution to Apache Arrow"
description:
  A guide for R developers who would like to contribute to the arrow
  package without ending up in tears. Okay, not too many tears. 
author:
  - first_name: "Danielle"
    last_name: "Navarro"
    url: https://djnavarro.net
    affiliation: Voltron Data
    affiliation_url: https://voltrondata.com
    orcid_id: 0000-0001-7648-6578
date: 2022-01-19
preview: img/kaleb-tapp-J59wWPn09BE-unsplash.jpg 
creative_commons: CC BY
citation_url: https://blog.djnavarro.net/contributing-to-arrow 
repository_url: https://github.com/djnavarro/distill-blog/
output:
  distill::distill_article:
    self_contained: false
params:
  slug: contributing-to-arrow
  date: 2022-01-19
  repo: djnavarro/distill-blog
  site: https://blog.djnavarro.net/
---

<!----

checklist:
  - check the "update me" messages in YAML above
  - initialise the _renv folder with refinery::renv_new("name of post folder")
  - populate the lockfile with refinery::renv_snapshot("name of post folder")
  - update the _renv folder from snapshot with refinery::restore("name of post folder")

---->


<!--------------- setup post ----------------->

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
refinery::renv_load(paste(params$date, params$slug, sep = "_"))
```


<!--------------- post ----------------->

This is the second in a two part post, following on from [Binding Apache Arrow to R](https://blog.djnavarro.net/binding-arrow-to-r)

## Preparing to contribute

If you've read my previous blog post and followed this one up to here, you're probably at the same level of knowledge that I was at when I started work on my first Arrow contribution. So what happens next? 

A lot of this content is covered in the [New Contributors Guide](https://arrow.apache.org/docs/dev/developers/guide/index.html), but please be aware that this guide is a work in progress and may not be complete yet! 


### Step 1: Sign up for Apache Jira

The first step in making a contribution is making sure you have an [Apache Jira account](https://issues.apache.org/jira), ideally using the same username as your GitHub username. For me, this was a new process. All my previous experience in software development used GitHub to host the code and used GitHub issues for project management. The workflow for Apache Arrow is a little different: the *code* is on GitHub, but *issues* are tracked in Apache Jira. 

Once you have an account, you can go browsing to find an open issue that you'd like to work on. Find the absolute simplest thing you can! Anything tagged with "good first issue" is usually a safe bet: here's the one I chose [ARROW-14823](https://issues.apache.org/jira/browse/ARROW-14823). If you look at the issue thread, you'll notice that I haven't actually written anything there! Usually you would write something volunteering to help out, and then you'd be officially "assigned" that issue. The only reason I didn't write anything in this case is that this was actually the *second* Jira ticket I volunteered for, and by the time I got to this one I'd been given permission to self-assign, and I'd literally just gotten off a call with Nic Crane (who also happens to be the maintainer who handled everything associated with this one!) where I'd volunteered to do this. 

(What happened to my *first* ticket, I hear you wondering? More on that later!)

### Step 2: Create your own fork

The next step in the process is to create your own fork of Apache Arrow. The **usethis** package automates a lot of this for you courtesy of the `create_from_github()` function. At the R console type this command, substituting your own preferred location for the Arrow repository in place of `"/home/danielle/GitHub/projects"`:

```{r, eval=FALSE}
usethis::create_from_github(
  repo_spec = "apache/arrow", 
  destdir = "/home/danielle/GitHub/projects",
  rstudio = FALSE 
)
```

This will create a fork of the Arrow repository, clone it to your local machine and configure the upstream remotes for you. I've set `rstudio = FALSE` because in this case you don't actually want to treat the *whole* of the Arrow repository as an RStudio project: there's an "r" folder that corresponds to the **arrow** R package, and that subfolder is already an RStudio project. To open that project, navigate to that subfolder and open the `arrow.Rproj` file.

### Step 3: Make sure **libarrow** is up to date

```{r, eval=FALSE}
install_arrow(nightly = TRUE, verbose = TRUE)
```

If you need it, here are some more detailed instructions about [installing nightly builds](https://ursalabs.org/arrow-r-nightly/articles/developers/setup.html).

Make sure devtools::test() works. also check “install and restart” (ctrl shift B). be warned: check (ctrl shift E) takes ages


### Step 4: Get started


```{r, eval=FALSE}
usethis::pr_init("ARROW-14281")
```


### Step 5: Writing and testing the code!

The next step in the process is writing your code and the unit tests for your code. There's a work-in-progress [Developers Guide to Writing Bindings](https://arrow.apache.org/docs/dev/r/articles/developers/bindings.html) article on the Arrow website but again, please be aware that this is a work in progress. Plus, I'll talk more about this part of the process below!


### Step 6: Making the pull request

- Name it to match the Jira issue exactly
- It's a bit of a pain the first time: maintainers need to approve every run
- Usual back and forth during the PR... be nice etc.
- After a while it will be approved: the maintainer will merge it, and then you're done
- Eventually ends up in a later release of **arrow**

## The magic of dplyr bindings

- dplyr bindings can be used to mask other stuff... that’s the usual way we handle this
- `register_bindings()` is tricky: remember you’re creating an Expression to be evaluated later
- new contributors guide: 


<!--------------- appendices ----------------->

```{r, echo=FALSE}
refinery::insert_appendix(
  repo_spec = params$repo, 
  name = paste(params$date, params$slug, sep = "_")
)
```


<!--------------- miscellanea ----------------->

```{r redirect, echo=FALSE}
refinery::insert_netlify_redirect(
  slug = params$slug, 
  date = params$date
)
```




